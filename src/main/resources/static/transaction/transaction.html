
<!DOCTYPE HTML>
<html lang="en">
<body>

<form>
    <label for="text">Cryptocode:</label>
    <input type="text" name="cryptocode" id="text" /> <br>

    <label for="quantity">Quantity:</label>
    <input type="number" id="quantity" name="quantity">
    <br>
    <p>Buy from:</p>

    <input type="radio" id="The Bank" name="sellerId" value=1>
    <label for="The Bank">The Bank</label><br>
    <input type="radio" id="David" name="sellerId" value=3>
    <label for="David">Stevie (user 3)</label><br>
    <input type="radio" id="Jan-Jaap" name="sellerId" value=4>
    <label for="Jan-Jaap">Mariko (user 4)</label> <br>

    <button type="submit">Submit</button>
</form>

<script>
function handleSubmit(event) {
event.preventDefault();
    let cryptocode = document.getElementsByName("cryptocode")[0].value;

    let quantity = document.getElementsByName("quantity")[0].value;
    let sellerId = document.querySelector('input[name="sellerId"]:checked').value;
    let data = JSON.stringify({"buyerId":2, "sellerId":sellerId, "assetCode":cryptocode, "quantity":quantity});

    fetch('http://localhost:8080/transaction/buy', {
        method: 'POST',
        headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json'
        },
        body: data// moet worden omgezet naar een string
    })
        .then(response => {
            console.log(response)
            document.write(response.toString())
                return response.json()
        }
        )
        .then(json => {
            console.log(json);
            document.write(json)
        })
        .catch((error) => {
            console.error('Foutje: ', error);
        });
}

const form = document.querySelector('form');
form.addEventListener('submit', handleSubmit);

</script>

    </body>
</html>
